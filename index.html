
<!DOCTYPE html>
<html>
<head>
<link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<title>xwiki demo</title>
<link rel="stylesheet" href="reset.css" />
<link rel="stylesheet" href="css.css" />
</head>
<body>
<div id="main-area">
  <div id="breadcrumb">
    <ul>
      <li><span>WIKI:</span>XWIKI</li>
      <li><span>Space:</span>Platform Features</li>
      <li><span>Page:</span>Page Editing</li>
    </ul>
    <div class="clear"></div>
  </div>

  <div id="content">
<h1 id="page-title">Page Editing</h1>

<span id="info"> 
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla interdum imperdiet tellus, sed porttitor dui adipiscing eu. Duis tellus elit, suscipit at molestie venenatis, malesuada et felis. Donec arcu tellus, lacinia in eleifend non, posuere vel ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam tristique fringilla justo, quis molestie sapien bibendum in. Phasellus purus ligula, bibendum at fringilla eu, congue ut eros. Duis lorem arcu, mattis nec pretium vel, tincidunt a justo.</p>
</span>
<div id="gadget-container">
<div id="gadget-left">
  <div class="section">
    <h2>Welcome to Page Editing</h2>
    <p>Donec tincidunt interdum elit nec sollicitudin. Morbi ac eros purus, at sollicitudin sapien. Maecenas eu diam magna. Nunc varius feugiat nisi, vitae porta nisi gravida a. Donec convallis magna id arcu iaculis ornare. Sed nec dolor non odio tempus aliquam ac eget velit. Vestibulum eget lorem et lorem pretium fringilla sit amet ac tortor. Donec ut placerat arcu. Morbi et justo lectus. In hac habitasse platea dictumst. Pellentesque sem magna, ultricies eu ultricies et, pretium vel purus. Curabitur auctor lorem dui, suscipit pretium nulla.</p></div>

  <div class="section">
    <h2>Hello</h2>
    <p>Curabitur venenatis mi at nunc fringilla lobortis. In sodales placerat lacus in varius. Ut blandit tempor erat vel volutpat. Pellentesque iaculis sapien vel libero consequat posuere. Nam imperdiet odio vitae ipsum accumsan elementum. Maecenas quis nisl at ligula elementum posuere a vitae ante. Pellentesque pharetra, mi a condimentum dignissim, dui metus pharetra sem, ac congue lectus quam viverra mi. Praesent semper augue id nibh porttitor feugiat. Pellentesque non tincidunt mauris. Ut ut venenatis erat. Morbi dolor velit, aliquet sed elementum ac, tempor a odio.</p></div>

  <div class="section">
    <h2>Foo bar</h2>
    <p>In sit amet odio est. Aliquam eget pharetra enim. Sed vel nulla est, sed lobortis orci. Fusce sed est et velit vulputate aliquam. Praesent ut est in elit fermentum eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla velit dolor, imperdiet non sagittis a, malesuada id enim. Phasellus elit arcu, sollicitudin at vulputate sit amet, dapibus ut nisl. Integer et dolor eget nulla blandit porttitor.</p></div>
</div><!--gadget-left-->

<div id="gadget-right">
  <div class="section">
    <h2>Activity Stream</h2>
    <p>In sit amet odio est. Aliquam eget pharetra enim. Sed vel nulla est, sed lobortis orci. Fusce sed est et velit vulputate aliquam. Praesent ut est in elit fermentum eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla velit dolor, imperdiet non sagittis a, malesuada id enim. Phasellus elit arcu, sollicitudin at vulputate sit amet, dapibus ut nisl. Integer et dolor eget nulla blandit porttitor.</p>

    <p>Mauris egestas turpis vitae mi pretium quis feugiat nisi porttitor. Integer sed porta mi. Donec sed arcu nec massa congue fermentum sit amet quis elit. Morbi eget sapien ante, id blandit tellus. Etiam id massa ligula. Ut laoreet dui et ante feugiat mollis. Donec vel dolor eu diam tincidunt consequat. In iaculis, risus id ornare malesuada, ante enim consequat est, suscipit blandit sapien diam nec arcu. Quisque at risus felis. Mauris sit amet arcu ut dui sagittis dignissim vitae id dui. Nam sed lacus id felis faucibus semper nec eget nibh. Sed tortor mauris, auctor quis aliquet tempor, aliquam a arcu. In ac velit sed diam elementum dapibus. Nullam in ipsum arcu. </p></div>
</div>
</div> <!--gadget-container-->
  </div>
</div>

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="" id="title">
      <h1 id="site-title">XWIKI</h1>
      
      <div id="search-wrapper">
        <form class="search" action="">
          <input type="text" class="text-field"/>
          <input type="submit" class="submit" value="submit" />
        </form>
        
      </div>

    <div id="nav-control-wrapper">
      <div id="nav-icons">
        <ul>
          <li>1</li>
          <li>2</li>
          <li>3</li>
          <li>4</li>
          <li>5</li>
          <li>6</li>
        </ul>
      </div>
      <div id="nav-control">
        <h2>menu</h2>
          <ul>
            <li id="main-link" class="active"><a href="#main">Main</a></li>
            <li id="comments-link"><a href="#comments">Comments</a></li>
            <li id="attachments-link"><a href="#attachments">Attachments</a></li>
          </ul> 
      </div>
    </div>
</div>
<div id="change">
  <div id="main" class="side-section">
    <div id="page-suplemental">
      <div id="page-meta">
        <dl>
          <dt>Last Modified:</dt>
           <dd><a href="#">Vincent Massol</a> on 2011/10/06 16:18</dd></br>
          <dt>Created: </dt>
           <dd><a href="#">Admin</a> on 2011/7/06 05:18</dd></br>
         <dt>Tags:</dt>
           <dd><a href="#">Hello</a>, <a href="#">World</a>, <a href="#">Foobar</a></dd>
        </dl>
        <div id="page-actions">
          <ul>
            <li id="page-edit"><a href="#">edit</a></li> 
            <li id="page-export">export:
              <ul>
                <li><a href="#">.pdf</a>, </li>
                <li><a href="#">.rtf</a>, </li>
                <li><a href="#">.html</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div id="toc">
        <h3>Table of Contents</h3>
        <ul>
          <li><a href="#">Simple and advanced editing modes</a>
            <ul>
              <li><a href="#">Simple mode</a></li>
              <li><a href="#">Advanced mode</a></li>
            </ul>
          </li>
          <li><a href="#">Common edit actions</a></li>
          <li><a href="#">Wiki editing mode</a></li>
        </ul>
      </div>
    </div>
    <h3 class="sub-menu">Quicklinks</h3>
    <ul>
      <li><a href="#">Dashboard</a></li>
      <li><a href="http://google.com">Document Index</a></li>
      <li><a href="#">User Directory</a></li>
      <li><a href="#">Sandbox</a></li>
    </ul>
    <h3 class="sub-menu">Recent</h3>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="http://google.com">Archive</a></li>
      <li><a href="#">Categories</a></li>
    </ul>
  </div>

  <div id="comments" class="side-section">
    <div class="each-comment">
      <div class="each-comment-content">
        <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
      </div>
      <div class="each-comment-user">
        <img src="http://placehold.it/50x50/fff">
        <h4>John Doe</h4>
        <time datetime="2012-02-17">February 17, 2012</time>
      </div>
    </div>
    <div class="each-comment">
      <div class="each-comment-content">
        <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
      </div>
      <div class="each-comment-user">
        <img src="http://placehold.it/50x50/fff">
        <h4>Jane Doe</h4>
        <time datetime="2012-02-17">February 17, 2012</time>
      </div>
    </div>
    <div class="each-comment">
      <div class="each-comment-content">
        <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
      </div>
      <div class="each-comment-user">
        <img src="http://placehold.it/50x50/fff">
        <h4>John Jane</h4>
        <time datetime="2012-02-17">February 17, 2012</time>
      </div>
    </div>
  </div>

  <div id="attachments" class="side-section">
    <p>Attachments. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
  </div>
</div>

  </div>
</div>



<script>


function hAdjust() // add height property to .html to allow for scrolling
{
    $("#change").css({'height':$(window).height()-$("#title").height()});
}

$(document).ready(function() { // apply the height property to enable scrolling
  hAdjust();
});

// allow resizing of sidebar
$( "#sidebar-wrapper" ).resizable({ minWidth: 200, maxWidth: 500, handles: "w", stop: function() { 
    $("#sidebar").width($(this).width());  
    $( "#sidebar-wrapper" ).css({'left': $("#sidebar").position().left});
  }
});

// get section positions to use to detect what section viewer is on
var main = Math.floor($('#main').offset().top)-$("#title").height(),
    comments = Math.floor($('#comments').offset().top)-$("#title").height(),
    attachments = Math.floor($('#attachments').offset().top)-$("#title").height();

// make sure things are ok even when we adjust window && recheck positions of section when resized-- need to optimize somehow.
$(window).resize(function () { 
  hAdjust();
  $("#main-area").width($(window).width()-$("#sidebar-wrapper").width());
  $( "#sidebar-wrapper" ).css({'position': 'absolute', 'left': $("#sidebar").position().left, 'height': $(window).height()});

var main = Math.floor($('#main').offset().top)-$("#title").height(),
    comments = Math.floor($('#comments').offset().top)-$("#title").height(),
    attachments = Math.floor($('#attachments').offset().top)-$("#title").height();
});

// .active is used to put the current section as the title header (for the dropdown menu)
// apply .active on click since scroll detection might not be triggered
$("#nav-control ul li").click(function(){
    $(".active").removeClass('active');
    $(this).addClass('active')
  });

// indicate which section at while scrolling and apply .active to active section
$("#change").scroll(function(){

  if( $('#main').position().top <= 0 && $('#main').position().top >0-$('#main').height()){
    $(".active").removeClass('active');
    $("#main-link").addClass('active')
  }
  
  if( $('#comments').position().top <= 0 && $('#comments').position().top >0-$('#comments').height()){
    $(".active").removeClass('active');
    $("#comments-link").addClass('active')
  }
  
  if($("#change")[0].scrollHeight - $("#change").scrollTop() == $("#change").outerHeight()
    || $('#attachments').position().top <= 0 && $('#attachments').position().top >0-$('#attachments').height() ) 
  {
    $(".active").removeClass('active');
    $("#attachments-link").addClass('active')
  }
});

</script>
</body>
</html>