
<!DOCTYPE html>
<html class="no-js">
<head>
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="reset.css" />
<link rel="stylesheet" href="css.css" />

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
   <script type="text/javascript" src="js/modernizr.js"></script>
   <script type="text/javascript" src="js/respond.min.js"></script>
   
<title>xwiki demo</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">
</head>
<body>
<div id="header">
  <h1 id="site-title">XWIKI</h1>
      
  <div id="search-wrapper">
    <form class="search" action="">
      <input type="text" class="text-field"/>
      <input type="submit" class="submit" value="submit" />
    </form>
  </div>

  <span class = "mobile" id="swipe-hint">Swipe horizontally to access menu</span>
</div>
<div id="main-area">
  <div id="breadcrumb">
    <ul>
      <li id="wiki"><span>WIKI:</span>XWIKI
        <ul>
          <li><a href="#">watch wiki</a></li>
          <li><a href="#">administer wiki</a></li>
          <hr/>
          <li><a href="#">document index</a></li>
          <li><a href="#">dashboard</a></li>
        </ul>
      </li>
      <li id="space"><span>Space:</span>Platform Features
        <ul>
          <li><a href="#">watch wiki</a></li>
          <li><a href="#">administer wiki</a></li>
          <hr/>
          <li><a href="#">document index</a></li>
          <li><a href="#">dashboard</a></li>
        </ul>
      </li>
      <li id="page"><span>Page:</span>Page Editing
        <ul>
          <li><a href="#">watch wiki</a></li>
          <li><a href="#">administer wiki</a></li>
          <hr/>
          <li><a href="#">document index</a></li>
          <li><a href="#">dashboard</a></li>
        </ul>
      </li>
    </ul>
    <div class="clear"></div>
  </div>

  <div id="content">
<h1 id="page-title">Page Editing</h1>

<span id="info"> 
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla interdum imperdiet tellus, sed porttitor dui adipiscing eu. Duis tellus elit, suscipit at molestie venenatis, malesuada et felis. Donec arcu tellus, lacinia in eleifend non, posuere vel ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam tristique fringilla justo, quis molestie sapien bibendum in. Phasellus purus ligula, bibendum at fringilla eu, congue ut eros. Duis lorem arcu, mattis nec pretium vel, tincidunt a justo.</p>
</span>
<div id="gadget-container">
<div id="gadget-left">
  <div class="section">
    <h2 class="section-title">Welcome to Page Editing</h2>
    <div class="section-content">
     <p>Donec tincidunt interdum elit nec sollicitudin. Morbi ac eros purus, at sollicitudin sapien. Maecenas eu diam magna. Nunc varius feugiat nisi, vitae porta nisi gravida a. Donec convallis magna id arcu iaculis ornare. Sed nec dolor non odio tempus aliquam ac eget velit. Vestibulum eget lorem et lorem pretium fringilla sit amet ac tortor. Donec ut placerat arcu. Morbi et justo lectus. In hac habitasse platea dictumst. Pellentesque sem magna, ultricies eu ultricies et, pretium vel purus. Curabitur auctor lorem dui, suscipit pretium nulla.</p>
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Hello</h2>
    <div class="section-content">
    <p>Curabitur venenatis mi at nunc fringilla lobortis. In sodales placerat lacus in varius. Ut blandit tempor erat vel volutpat. Pellentesque iaculis sapien vel libero consequat posuere. Nam imperdiet odio vitae ipsum accumsan elementum. Maecenas quis nisl at ligula elementum posuere a vitae ante. Pellentesque pharetra, mi a condimentum dignissim, dui metus pharetra sem, ac congue lectus quam viverra mi. Praesent semper augue id nibh porttitor feugiat. Pellentesque non tincidunt mauris. Ut ut venenatis erat. Morbi dolor velit, aliquet sed elementum ac, tempor a odio.</p>
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Foo bar</h2>
    <div class="section-content">
      <p>In sit amet odio est. Aliquam eget pharetra enim. Sed vel nulla est, sed lobortis orci. Fusce sed est et velit vulputate aliquam. Praesent ut est in elit fermentum eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla velit dolor, imperdiet non sagittis a, malesuada id enim. Phasellus elit arcu, sollicitudin at vulputate sit amet, dapibus ut nisl. Integer et dolor eget nulla blandit porttitor.</p>
    </div>
  </div>
</div><!--gadget-left-->

<div id="gadget-right">
  <div class="section">
    <h2 class="section-title">Activity Stream</h2>
    <div class="section-content">
      <p>In sit amet odio est. Aliquam eget pharetra enim. Sed vel nulla est, sed lobortis orci. Fusce sed est et velit vulputate aliquam. Praesent ut est in elit fermentum eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla velit dolor, imperdiet non sagittis a, malesuada id enim. Phasellus elit arcu, sollicitudin at vulputate sit amet, dapibus ut nisl. Integer et dolor eget nulla blandit porttitor.</p>

      <p>Mauris egestas turpis vitae mi pretium quis feugiat nisi porttitor. Integer sed porta mi. Donec sed arcu nec massa congue fermentum sit amet quis elit. Morbi eget sapien ante, id blandit tellus. Etiam id massa ligula. Ut laoreet dui et ante feugiat mollis. Donec vel dolor eu diam tincidunt consequat. In iaculis, risus id ornare malesuada, ante enim consequat est, suscipit blandit sapien diam nec arcu. Quisque at risus felis. Mauris sit amet arcu ut dui sagittis dignissim vitae id dui. Nam sed lacus id felis faucibus semper nec eget nibh. Sed tortor mauris, auctor quis aliquet tempor, aliquam a arcu. In ac velit sed diam elementum dapibus. Nullam in ipsum arcu. </p>
   </div>
  </div>
</div>
</div> <!--gadget-container-->
  </div>
</div>

<div id="sidebar-wrapper">
  <div id="sidebar-handle">
<h2><a id="to-menu" href="#sidebar">Menu + More</a> &nbsp;//&nbsp;  
  <a id="to-content" href="#main-area">Content</a> </h2></div>
  <div id="sidebar">
    <div id="nav-control-wrapper">
      <div id="nav-icons">
        <a href="#navigation"><div class="sprite sprite-navigation-png"></div></a>
        <a href="#comments"><div class="sprite sprite-comments-png"><span>3</span></div></a>
        <a href="#attachments"><div class="sprite sprite-attachments-png"><span>5</span></div></a>
        <a href="#history"><div class="sprite sprite-history-png"></div></a>
        <a href="#information"><div class="sprite sprite-information-png"></div></a>
        <a href="#edit"><div class="sprite sprite-edit-png"></div></a>
        <a href="#export"><div class="sprite sprite-export-png"></div></a>
      </div>
      <div id="nav-control-header">
      <div id="nav-control">
        <h2>navigation</h2>
          <ul>
            <li id="navigation-link" class="active"><a href="#navigation">Navigation</a></li>
            <li id="comments-link"><a href="#comments">Comments</a><span>3</span></li>
            <li id="attachments-link"><a href="#attachments">Attachments</a><span>3</span></li>
            <li id="history-link"><a href="#history">History</a></li>
            <li id="information-link"><a href="#information">Information</a></li>
            <li id="edit-link"><a href="#edit">Edit</a></li>
            <li id="export-link"><a href="#export">Export</a></li>
          </ul> 
      </div>
    </div>
    </div>

<div id="change">
  <div id="navigation" class="side-section">
    <div id="page-suplemental">
      <div id="toc">
        <h3>Table of Contents</h3>
        <ul>
          <li><a href="#">Simple and advanced editing modes</a>
            <ul>
              <li><a href="#">Simple mode</a></li>
              <li><a href="#">Advanced mode</a></li>
            </ul>
          </li>
          <li><a href="#">Common edit actions</a></li>
          <li><a href="#">Wiki editing mode</a></li>
        </ul>
      </div>
    </div>
    <h3 class="sub-menu">Quicklinks</h3>
    <ul>
      <li><a href="#">Dashboard</a></li>
      <li><a href="http://google.com">Document Index</a></li>
      <li><a href="#">User Directory</a></li>
      <li><a href="#">Sandbox</a></li>
    </ul>
    <h3 class="sub-menu">Recent</h3>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="http://google.com">Archive</a></li>
      <li><a href="#">Categories</a></li>
    </ul>
  </div>

  <div id="comments-wrapper" class="side-section">
    <h2>Comments<span>3</span></h2>
    <div id="comments">
      <div class="each-comment">
        <div class="each-comment-content">
          <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
        </div>
        <div class="each-comment-user">
          <img src="http://placehold.it/50x50/fff">
          <h4>John Doe</h4>
          <time datetime="2012-02-17">February 17, 2012</time>
        </div>
      </div>
      <div class="each-comment">
        <div class="each-comment-content">
          <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
        </div>
        <div class="each-comment-user">
          <img src="http://placehold.it/50x50/fff">
          <h4>Jane Doe</h4>
          <time datetime="2012-02-17">February 17, 2012</time>
        </div>
      </div>
      <div class="each-comment">
        <div class="each-comment-content">
          <p>A Comment. Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem.</p>
        </div>
        <div class="each-comment-user">
          <img src="http://placehold.it/50x50/fff">
          <h4>John Jane</h4>
          <time datetime="2012-02-17">February 17, 2012</time>
        </div>
      </div>
    </div>
  </div>

  <div id="attachments-wrapper" class="side-section">
    <h2>Attachments<span>3</span></h2>
    <div id="attachments">
      <div class="each-comment">
        <div class="each-comment-content">
          <span class="name">Fullscreen.png </span><span class="version">1.6</span>
        </div>
        <div class="each-comment-user">
          <img src="http://placehold.it/50x50/fff">
          <h4><a href="#">Silvia Rusu</a></h4>
          <time datetime="2012-02-17">February 17, 2012</time> <span>36.1kb</span>
        </div>
      </div>
      <div class="each-comment">
        <div class="each-comment-content">
          <span class="name">EditSimpleMode.png </span><span class="version">1.1</span>
        </div>
        <div class="each-comment-user">
          <img src="http://placehold.it/50x50/fff">
          <h4><a href="#">Sorin Burjan</a></h4>
          <time datetime="2012-02-17">February 17, 2012</time> <span>19.9kb</span>
        </div>
      </div>
    </div>
  </div>

  <div id="history-wrapper" class="side-section">
    <h2>History</h2>
    <div id="history">
      <div class="each-comment">
        <div class="each-comment-content">
          <p>No history for this document</p>
        </div>
      </div>
    </div>
  </div>

  <div id="information-wrapper" class="side-section">
    <h2>Information</h2>
    <div id="information">
      <div id="page-suplemental">
      <div id="page-meta">
        <dl>
          <dt>Last Modified:</dt>
           <dd><a href="#">Vincent Massol</a> on 2011/10/06 16:18</dd></br>
          <dt>Created: </dt>
           <dd><a href="#">Admin</a> on 2011/7/06 05:18</dd></br>
         <dt>Tags:</dt>
           <dd><a href="#">Hello</a>, <a href="#">World</a>, <a href="#">Foobar</a></dd>
        </dl>
        <div id="page-actions">
          <ul>
            <li id="page-edit"><a href="#">edit</a></li> 
            <li id="page-export">export:
              <ul>
                <li><a href="#">.pdf</a>, </li>
                <li><a href="#">.rtf</a>, </li>
                <li><a href="#">.html</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
      <h3 class="sub-menu">Parent</h3>
      <ul>
        <li><a href="#">Platform Features</a></li>
      </ul>
      <h3 class="sub-menu">Children</h3>
      <ul>
        <li><a href="#">Features</a>
          <ul>
            <li><a href="#">WYSIWYG Editor</a></li>
          </ul>
        </li>
      </ul>
      <h3 class="sub-menu">Backlinks</h3>
      <ul>
        <li><a href="#">Admin Guide</a>
          <ul>
            <li><a href="#">Configuration</a></li>
          </ul>
        </li>
        <li><a href="#">Features</a>
          <ul>
            <li><a href="#">Document Lifecycle</a></li>
            <li><a href="#">Version Control</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>

  <div id="edit-wrapper" class="side-section">
    <h3 class="sub-menu">Edit</h3>
    <div id="edit">
      <ul>
        <li><a href="#">Wiki</a></li>
        <li><a href="#">WYSWYG</a></li>
        <li><a href="#">Inline Form</a></li>
      </ul>
    </div>
  </div>

  <div id="export-wrapper" class="side-section">
    <div id="export">
      <ul>
        <li><a href="#">Print Preview</a></li>
        <li><a href="#">View Source</a></li>
      </ul>
      <h3 class="sub-menu">Save As</h3>
      <ul>
        <li><a href="#">.pdf</a></li>
        <li><a href="#">.rtf</a></li>
        <li><a href="#">.html</a></li>
      </ul>
    </div>
  </div>

</div><!--change-->

  </div>
</div>


<script>

var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i) ? true : false;
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i) ? true : false;
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i) ? true : false;
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
    }
};

// allow resizing of sidebar
function resizeControl () {
  if( !(isMobile.any() || $(window).width() <= 480) ) {
    $("#main-area").width($(window).width()-$("#sidebar").width());
    $( "#sidebar" ).resizable({ minWidth: 290, maxWidth: 500, handles: "w"}).css({'left': $("#main-area").position().left+$("#main-area").width(), 'bottom': 0, 'top': ''});
    $('#header').width($('#sidebar').width());
  }
  else {
    $("#main-area").width('95%');
    $('#header').width('95%');
    $('#sidebar').height('').width('');
  }
}

$(document).ready(function() {
  resizeControl();
});

// make sure things are ok even when we adjust window && recheck positions of section when resized-- need to optimize somehow.
$(window).resize(function () { 
  resizeControl();
});

// .active is used to put the current section as the title header (for the dropdown menu)
// apply .active on click since scroll detection might not be triggered
$("#nav-control ul li").click(function(){
    $(".active").removeClass('active');
    $(this).addClass('active')
  });

// indicate which section at while scrolling and apply .active to active section
$("#change").scroll(function(){

// first get position of div from the top. then check if that position has now become 0. if it has become 0, then viewer is in that section. However since, we originally have a title there, we will offset 25 so that the section is activated once the original title go above the view. Additionally, check that it is within the div's position from the top + the height of the div. 

if( $('#navigation').position().top <= 0 && $('#navigation').position().top >0-$('#navigation').height()){
    $(".active").removeClass('active');
    $("#navigation-link").addClass('active')
  }
  
  if( $('#comments').position().top <= 0 && $('#comments').position().top >0-$('#comments').height()){
    $(".active").removeClass('active');
    $("#comments-link").addClass('active')
  }

  if( $('#attachments').position().top <= 0 && $('#attachments').position().top >0-$('#attachments').height()){
    $(".active").removeClass('active');
    $("#attachments-link").addClass('active')
  }

  if( $('#history').position().top <= 0 && $('#history').position().top >0-$('#history').height()){
    $(".active").removeClass('active');
    $("#history-link").addClass('active')
  }

  if( $('#information').position().top <= 0 && $('#information').position().top >0-$('#information').height()){
    $(".active").removeClass('active');
    $("#information-link").addClass('active')
  }

  if( $('#edit').position().top <= 0 && $('#edit').position().top >0-$('#edit').height()){
    $(".active").removeClass('active');
    $("#edit-link").addClass('active')
  }
  
//the last section is a bit different since if the viewer can no longer scroll, that means he is in the last section. Either that or, the div's position is now 0 like before AND it has passed the previous section. 
  if($("#change")[0].scrollHeight - $("#change").scrollTop() == $("#change").outerHeight() || $('#export').position().top <= 0 && $('#export').position().top >0-$('#export').height()) {
    $(".active").removeClass('active');
    $("#export-link").addClass('active')
  }
});

// make handle vertically fixed
$(window).scroll(function(){
    $( "#sidebar-handle" ).css({
      'top': $(window).scrollTop()+180
    });
});

// shortcut to menu/content
$( "#to-menu" ).click(function() {
    window.scrollTo(390,window.pageYOffset);
    return false;
});
$( "#to-content" ).click(function() {
    window.scrollTo(0,window.pageYOffset);
    return false;
});

// shrink content area on mobile to be toggle able
$('.section-title').click(function() {
    $(this).next('.section-content').slideToggle(200,function() {
      $(this).prev('.section-title').toggleClass('expanded');
    });
});

//--- start drop down creator 
  // Create the dropdown base
  $("<select />").addClass('mobile').attr('id', 'nav-control-selector').appendTo("#nav-control-wrapper");

  // Create default option "Go to..."
  $("<option />", {
     "selected": "selected",
     "value"   : "",
     "text"    : "Go to..."
  }).appendTo("#nav-control-wrapper select");

  // Populate dropdown with menu items
  $("#nav-control ul li a").each(function() {
   var el = $(this);
   $("<option />", {
       "value"   : el.attr("href"),
       "text"    : el.text()
   }).appendTo("#nav-control-wrapper select");
  });

  //move to targeted drop down
  $("#nav-control-wrapper select").change(function() {
    window.location = $(this).find("option:selected").val();
  });

$('#breadcrumb > ul > li').each(function(index){

 $("<select />").addClass('mobile breadcrumb-drop').appendTo($(this));
 var dropdown= $(this).find($('select'));
 $("<option />", {
     "selected": "selected",
     "value"   : "",
     "text"    : "Go to..."
  }).appendTo(dropdown);

 $(this).find('a').each(function() {
   var el = $(this);
   $("<option />", {
       "value"   : el.attr("href"),
       "text"    : el.text()
   }).appendTo(dropdown);
  });

 $($(this).children($('select'))).change(function() {
    window.location = $(this).find("option:selected").val();
  });

});
//--- end drop down creator 

</script>
</body>
</html>